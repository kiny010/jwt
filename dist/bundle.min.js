!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("babel-polyfill"),require("crypto"),require("fs"));else if("function"==typeof define&&define.amd)define(["babel-polyfill","crypto","fs"],r);else{var n="object"==typeof exports?r(require("babel-polyfill"),require("crypto"),require("fs")):r(e["babel-polyfill"],e.crypto,e.fs);for(var t in n)("object"==typeof exports?exports:e)[t]=n[t]}}(this,function(e,r,n){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var n={};return r.m=e,r.c=n,r.i=function(e){return e},r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=4)}([function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),u=n(3),a=(t(u),n(2)),f=t(a),l=(Symbol(),Symbol(),{RS256:"RSA-SHA256"}),c=function(){function e(){o(this,e)}return i(e,[{key:"encode",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RS256",t=this,o={alg:n,typ:"JWT"},i=l[n],u=t.encodeBase64(JSON.stringify(o)),a=t.encodeBase64(JSON.stringify(e));return[u,a,t.sign([u,a].join("."),r,i)].join(".")}},{key:"decode",value:function(e,r){var n=this;if(!e)throw new Error("No token supplied.");var t=e.split(".");if(3!==t.length)throw new Error("Token is invalid.");var o=t[0],i=t[1],u=t[2],a=JSON.parse(n.decodeBase64(o)),f=JSON.parse(n.decodeBase64(i)),c=a.alg,s=l[c];if(!n.verify([o,i].join("."),r,s,u))throw new Error("Signature verification failed.");if(f.nbf&&Date.now()<1e3*f.nbf)throw new Error("Token has not been activated.");if(f.exp&&Date.now()>1e3*f.exp)throw new Error("Token has expired.");return f}},{key:"sign",value:function(e,r,n){return this.escapeBase64url(f.default.createSign(n).update(e).sign(r,"base64"))}},{key:"verify",value:function(e,r,n,t){var o=this;return f.default.createVerify(n).update(e).verify(r,o.unescapeBase64url(t),"base64")}},{key:"encodeBase64",value:function(e){return this.escapeBase64url(new Buffer(e).toString("base64"))}},{key:"decodeBase64",value:function(e){var r=this;return new Buffer(r.unescapeBase64url(e),"base64").toString()}},{key:"unescapeBase64url",value:function(e){return e+=new Array(5-e.length%4).join("="),e.replace(/\-/g,"+").replace(/_/g,"/")}},{key:"escapeBase64url",value:function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}}]),e}();r.default=new c},function(e,r){e.exports=require("babel-polyfill")},function(e,r){e.exports=require("crypto")},function(e,r){e.exports=require("fs")},function(e,r,n){n(1),e.exports=n(0)}])});