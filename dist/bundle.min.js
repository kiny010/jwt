!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("babel-polyfill"),require("christa-base64url"),require("crypto"));else if("function"==typeof define&&define.amd)define(["babel-polyfill","christa-base64url","crypto"],r);else{var t="object"==typeof exports?r(require("babel-polyfill"),require("christa-base64url"),require("crypto")):r(e["babel-polyfill"],e["christa-base64url"],e.crypto);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,function(e,r,t){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};return r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=4)}([function(e,r,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),u=t(3),a=n(u),l=t(2),f=n(l),c=Symbol(),s=Symbol(),p=function(){function e(r){o(this,e),this.algorithmMap={RS256:"RSA-SHA256",RS384:"RSA-SHA384",RS512:"RSA-SHA512"};if(r!==s)throw"Failed to construct singleton."}return i(e,null,[{key:"instance",get:function(){var r=this;return r[c]||(r[c]=new e(s)),r[c]}}]),i(e,[{key:"encode",value:function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RS512",n=this,o={alg:t,typ:"JWT"},i=n.algorithmMap[t],u=f.default.encode(JSON.stringify(o)),a=f.default.encode(JSON.stringify(e));return[u,a,f.default.encode(n.sign([u,a].join("."),r,i))].join(".")}},{key:"decode",value:function(e,r){var t=this,n=e.split(".");if(!e)throw new Error("No token supplied.");if(3!==n.length)throw new Error("Token is invalid.");var o=n[0],i=n[1],u=n[2],a=f.default.decode(u),l=JSON.parse(f.default.decode(o)),c=JSON.parse(f.default.decode(i)),s=l.alg,p=t.algorithmMap[s];if(!t.verify([o,i].join("."),r,p,a))throw new Error("Signature verification failed.");if(c.nbf&&Date.now()<1e3*c.nbf)throw new Error("Token has not been activated.");if(c.exp&&Date.now()>1e3*c.exp)throw new Error("Token has expired.");return c}},{key:"sign",value:function(e,r,t){return a.default.createSign(t).update(e).sign(r,"hex")}},{key:"verify",value:function(e,r,t,n){return a.default.createVerify(t).update(e).verify(r,n,"hex")}}]),e}();r.default=p.instance},function(e,r){e.exports=require("babel-polyfill")},function(e,r){e.exports=require("christa-base64url")},function(e,r){e.exports=require("crypto")},function(e,r,t){t(1),e.exports=t(0)}])});